<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Module Search Fix</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body { background-color: #1e1e1e; color: #fff; font-family: monospace; font-size: 12px; padding: 10px; }
  .group { padding: 10px; margin: 10px 0; border-radius: 5px; background: #2e3b4e; border-left: 4px solid #FFD700; }
  .key { font-weight: bold; display: inline-block; min-width: 100px; }
  .value { word-break: break-word; }
</style>
</head>
<body>
<h2>Пошук модуля</h2>
<input type="text" id="moduleInput" placeholder="Введи артикл або šteker">
<button onclick="findModule()">Пошук модуля</button>
<div id="module-output"></div>
<script>
let moduleData = [];
const MODULE_URL = "https://gist.githubusercontent.com/PodporaSerizovac/17c348b49eafbf6ff47420c2727ca454/raw/0b7934dc891f5fc85db83fc57dd56aa5ce35f048/modul.json";

async function loadModules() {
  try {
    const resp = await fetch(MODULE_URL);
    if (!resp.ok) throw new Error(`HTTP ${resp.status}`);
    moduleData = await resp.json();
    console.log("Modules loaded:", moduleData.length);
  } catch (err) {
    console.error("Помилка завантаження модулів:", err);
  }
}

function findModule() {
  const input = document.getElementById('moduleInput').value.trim().toLowerCase();
  const moduleDiv = document.getElementById('module-output');
  moduleDiv.innerHTML = '';
  if (!input) return moduleDiv.innerHTML = `<p>Введи артикл або šteker!</p>`;

  const matches = moduleData.filter(m => {
    const artikl = String(m['artikl'] || m['Artikl'] || '').toLowerCase();
    const steker = String(m['steker'] || m['šteker'] || m['Šteker'] || '').toLowerCase();
    return artikl === input || steker === input;
  });

  if (matches.length === 0) return moduleDiv.innerHTML = `<p>Модуль ${input} не знайдено.</p>`;

  moduleDiv.innerHTML = matches.map(m => `<div class="group">${Object.entries(m).map(([k,v]) => `<div><span class="key">${k}:</span> <span class="value">${v}</span></div>`).join('')}</div>`).join('');
}

window.addEventListener('DOMContentLoaded', loadModules);
</script>
</body>
</html>
